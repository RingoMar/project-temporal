"use strict";(self.webpackChunkproject_temporal=self.webpackChunkproject_temporal||[]).push([[3021],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>u});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=a.createContext({}),c=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(o),m=n,u=h["".concat(l,".").concat(m)]||h[m]||d[m]||i;return o?a.createElement(u,r(r({ref:t},p),{},{components:o})):a.createElement(u,r({ref:t},p))}));function u(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=o.length,r=new Array(i);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:n,r[1]=s;for(var c=2;c<i;c++)r[c]=o[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,o)}m.displayName="MDXCreateElement"},4573:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=o(7462),n=(o(7294),o(3905));const i={slug:"samantha",title:"Samantha Bot",sidebar_position:4},r="Samantha Bot",s={unversionedId:"samantha",id:"samantha",title:"Samantha Bot",description:'Samantha is a Twitch bot that utilizes research from Project Temporal to monitor audio from a Twitch stream for the use of profanity. It is built using ffmpeg for audio processing, golang for the backend, and python for the interface. The bot counts the number of times the word "fuck" is used in the stream\'s audio.',source:"@site/docs/samantha.md",sourceDirName:".",slug:"/samantha",permalink:"/project-temporal/docs/samantha",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{slug:"samantha",title:"Samantha Bot",sidebar_position:4},sidebar:"defaultSidebar",previous:{title:"Chat bot for people with disabilities",permalink:"/project-temporal/docs/project-idea/dis-bot"}},l={},c=[{value:"Raw Implementation",id:"raw-implementation",level:3},{value:"Package Implementation",id:"package-implementation",level:3}],p={toc:c};function h(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"samantha-bot"},"Samantha Bot"),(0,n.kt)("p",null,'Samantha is a Twitch bot that utilizes research from Project Temporal to monitor audio from a Twitch stream for the use of profanity. It is built using ffmpeg for audio processing, golang for the backend, and python for the interface. The bot counts the number of times the word "fuck" is used in the stream\'s audio.'),(0,n.kt)("h1",{id:"what-is-ffmpeg"},"what is ffmpeg"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"audio-wave",src:o(939).Z,width:"1024",height:"597"}),"\nFFmpeg is a free, open-source, command-line software that can be used to record, convert, and stream audio and video. It supports a wide variety of codecs and file formats, and is commonly used for video encoding, decoding, and manipulation."),(0,n.kt)("code",null,'ffmpeg -i "https://usher.ttvnw.net/api/channel/hls/..." -vn -c:a aac -b:a 128k -segment_time 10 -f segment audio/output_%03d.aac'),(0,n.kt)("p",null,"This command tells ffmpeg to take the input from the specified m3u8 URL, to ignore any video (-vn), and to copy the audio codec into 30-second segments, and to save each segment to a separate file using the %03d pattern.."),(0,n.kt)("h1",{id:"how-does-it-get-the-words"},"How does it get the words?"),(0,n.kt)("p",null,"OpenAI's Whisper is a high-quality voice synthesis model that can be used to generate natural-sounding speech. It is based on the Transformer architecture and can be fine-tuned on a specific speaker's voice, making it capable of generating speech in different accents and languages."),(0,n.kt)("p",null,"In the context of a project, Whisper can be used to loop through an array of files that are added to a directory. The process would involve first converting the text data in the files to speech using Whisper, and then updating a counter in a local file through a post request. The looping mechanism is implemented using python that continuously monitors the directory for new files and processes them as they are added."),(0,n.kt)("p",null,"The time of the segments from the ffmpeg script can be fine used to allow for real-time conversion of text to speech or just normal processing over time as new files are added to the directory, allowing for automatic processing without human intervention."),(0,n.kt)("p",null,"It's worth noting that OpenAI API's including Whisper are not public anymore, you need to apply for access, pay for usage or run stright from the ground up."),(0,n.kt)("h1",{id:"golang-why"},"Golang? Why?"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"go bot",src:o(6266).Z,width:"500",height:"500"}),"\nGo, is a programming language developed by Google that is often used for building backend systems. In the context of this project its a Twitch bot to send updates to the Twitch chat when a specific command is called. Golang is also being used to process API calls to keep track of the counter allowing for max efficiency."),(0,n.kt)("p",null,"The Go programming language also provides built-in support for concurrency, which allows multiple tasks to be executed simultaneously. This can be useful in a Twitch bot & the api caller because it allows for the processing of multiple commands or requests at the same time, without slowing down the overall performance of the bot."),(0,n.kt)("p",null,"Additionally, Golang is a compiled language which makes it a good choice for performance-sensitive applications, and it also provides good support for cross-compilation, making it easy to deploy the bot on different platforms."),(0,n.kt)("p",null,"In summary, Golang is a suitable choice for building the backend of a Twitch bot because it provides robust support for handling network connections, concurrency, and performance-sensitive applications. It's well suited to handle the api calls and updates to the Twitch chat when the command ",(0,n.kt)("inlineCode",{parentName:"p"},"?fbomb")," is called."),(0,n.kt)("h1",{id:"summary"},"Summary"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"overview",src:o(7838).Z,width:"771",height:"771"})),(0,n.kt)("p",null,"The project architecture for the Twitch bot that uses OpenAI's Whisper, ffmpeg and golang, includes utilizing Whisper for converting text to speech, ffmpeg for extracting audio from a m3u8 stream and splitting it into 30-second segments, and golang for the backend to process API calls, and sending updates to the Twitch chat when the command ",(0,n.kt)("inlineCode",{parentName:"p"},"?fbomb")," is called."),(0,n.kt)("h1",{id:"update-30324"},"Update 30/3/24"),(0,n.kt)("h3",{id:"raw-implementation"},"Raw Implementation"),(0,n.kt)("p",null,"After revisiting this project once again, I have looked at ways in which I could implement real time audio translation. Originally, I envisioned extracting the audio directly from the link using an ffmpeg command like this:\n",(0,n.kt)("inlineCode",{parentName:"p"},'ffmpeg -i "https://live.servace.m3u8" -f wav pipe:1'),"\nThis approach would have eliminated the need to download the ",(0,n.kt)("inlineCode",{parentName:"p"},".ts")," segments from the M3U8 file, reducing latency. The extracted audio could then be fed directly into the ",(0,n.kt)("em",{parentName:"p"},"Whisper")," class for processing."),(0,n.kt)("p",null,"However, I discovered that someone had already implemented this technique."),(0,n.kt)("h3",{id:"package-implementation"},"Package Implementation"),(0,n.kt)("p",null,"I\u2019ve come across the project ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/collabora/WhisperLive"},"Whisper Live")," and after doing some research I could easily implement this into a project even through it doesn\u2019t seem as \u201cplug and go\u201d as I would want it to be. There is quite a bit of tinkering that could be done in order to get it to run really smooth, this includes using a GPU and not a CPU for processing & loading a larger custom model that will be able to process the words / data much better.\nOther than the improvements above to be done, (This might be just a limitation of knowledge) there was a problem with only getting 1 second or 9 seconds at a time. I have summarized this up too a sample rate error with the twitch m3u8 links and with a bit of work I believe I can overcome this."),(0,n.kt)("p",null,"The only other limitation to using this project would be the use of a Client / Server setup which I don\u2019t really see doing much damage to the processing / latency but there must be a better way to implement this natively, so nothing gets caught up etc."))}h.isMDXComponent=!0},6266:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/001-2736037818-3d0bb784c24a4511451f97f652b68290.gif"},939:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/futuristic-sound-wave-vector-dc63adedcfb8625eab53683817f20b79.jpg"},7838:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/overview-f7302ac51de8473e4844f9df1ab280f6.png"}}]);